<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>点餐系统学习随记 | lcdzzz的博客</title><meta name="author" content="lcdzzz"><meta name="copyright" content="lcdzzz"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="流程分析（小程序后端）          下单模块在首页进行扫码，入桌，然后会跳转到buy页面，点击选好了，如果没有问题的话，则跳转到confirmOrder页面，点击最下面的总计xxx,弹窗出现。经过一系列判断和对数据的处理，向&#x2F;userOrder&#x2F;create接口发送请求，对应后端的WxOrderUtils的createOrder方法 me页面 me界面，点击注册用户，跳转">
<meta property="og:type" content="article">
<meta property="og:title" content="点餐系统学习随记">
<meta property="og:url" content="http://lcdzzz.github.io/2022/05/16/%E7%82%B9%E9%A4%90%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E9%9A%8F%E8%AE%B0/index.html">
<meta property="og:site_name" content="lcdzzz的博客">
<meta property="og:description" content="流程分析（小程序后端）          下单模块在首页进行扫码，入桌，然后会跳转到buy页面，点击选好了，如果没有问题的话，则跳转到confirmOrder页面，点击最下面的总计xxx,弹窗出现。经过一系列判断和对数据的处理，向&#x2F;userOrder&#x2F;create接口发送请求，对应后端的WxOrderUtils的createOrder方法 me页面 me界面，点击注册用户，跳转">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://lcdzzz.github.io/2022/05/11/pictures/diancan.png">
<meta property="article:published_time" content="2022-05-16T08:48:12.000Z">
<meta property="article:modified_time" content="2024-01-28T14:53:01.210Z">
<meta property="article:author" content="lcdzzz">
<meta property="article:tag" content="springboot">
<meta property="article:tag" content="原创">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://lcdzzz.github.io/2022/05/11/pictures/diancan.png"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "点餐系统学习随记",
  "url": "http://lcdzzz.github.io/2022/05/16/%E7%82%B9%E9%A4%90%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E9%9A%8F%E8%AE%B0/",
  "image": "https://lcdzzz.github.io/2022/05/11/pictures/diancan.png",
  "datePublished": "2022-05-16T08:48:12.000Z",
  "dateModified": "2024-01-28T14:53:01.210Z",
  "author": [
    {
      "@type": "Person",
      "name": "lcdzzz",
      "url": "http://lcdzzz.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://lcdzzz.github.io/2022/05/16/%E7%82%B9%E9%A4%90%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E9%9A%8F%E8%AE%B0/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '点餐系统学习随记',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://lcdzzz.github.io/2022/05/11/pictures/diancan.png);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">lcdzzz的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">点餐系统学习随记</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">点餐系统学习随记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-16T08:48:12.000Z" title="发表于 2022-05-16 16:48:12">2022-05-16</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-28T14:53:01.210Z" title="更新于 2024-01-28 22:53:01">2024-01-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E9%A1%B9%E7%9B%AE%E5%AE%9E%E6%88%98/">项目实战</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><h1 id="流程分析（小程序后端）"><a href="#流程分析（小程序后端）" class="headerlink" title="流程分析（小程序后端）"></a>流程分析（小程序后端）</h1><!--![](小程序后端流程buy.png)-->

<!--![](小程序后端流程confirmOrders.png)-->



<!--于是下单，和创建订单的功能就开始了。在后端的`WxOrderController`中具体实现。-->



<h2 id="下单模块"><a href="#下单模块" class="headerlink" title="下单模块"></a>下单模块</h2><p>在首页进行扫码，入桌，然后会跳转到buy页面，点击选好了，如果没有问题的话，则跳转到confirmOrder页面，点击最下面的总计xxx,弹窗出现。经过一系列判断和对数据的处理，向&#x2F;userOrder&#x2F;create接口发送请求，对应后端的<code>WxOrderUtils</code>的<code>createOrder</code>方法</p>
<h2 id="me页面"><a href="#me页面" class="headerlink" title="me页面"></a>me页面</h2><ul>
<li><p>me界面，点击注册用户，跳转到change界面</p>
<p>点击提交修改按钮，对数据进行处理后，向&#x2F;user&#x2F;save接口发送请求。对应后端的<code>WxUserController</code></p>
</li>
<li><p>me页面，点击会员充值，跳转到vip页面</p>
<p>点击充值一、二年向&#x2F;user&#x2F;payVip接口发送请求，对应后端的<code>WxUserController</code></p>
</li>
<li><p>在app.js里，通过向&#x2F;use,r&#x2F;getUserInfo接口发送请求，拿到用户的数据，对应后端的<code>WxUserController</code></p>
</li>
<li><p>me界面，点击我的订单，跳转到myOrder页面</p>
<p>根据顶上的待上餐、已取消、待评价、已完成四个选项得到对应的<code>orderStatus</code>属性并请求&#x2F;userOrder&#x2F;listByStatus接口，对应后端的<code>WxOrderController</code></p>
</li>
<li><p>在myOrder页面里，待上餐模块，点击催上餐，向&#x2F;userOrder&#x2F;cuidan接口发送请求，对应后端的<code>WxOrderController</code></p>
</li>
<li><p>myOrder页面里，待评价模块，点击去评价，isShowComment变为true，跳出窗口，点击确认，对一系列数据进行处理后，对comment接口发送请求，对应后端<code>CommentController</code></p>
</li>
<li><p>myOrder页面里，已完成模块，点击查看评价，跳转到mycomment页面，因为传过去的type为1，所以先显示“我的评价”</p>
<p>内容，通过导航栏可以切换成全部评价</p>
<p>全部评价同理，不赘述了，对应的后端都是<code>CommentController</code>，分别对应两个方法<code>userCommentList</code>和<code>commentList</code></p>
</li>
<li><p>myOrder页面里，已取消模块同理。</p>
</li>
</ul>
<h2 id="排号模块"><a href="#排号模块" class="headerlink" title="排号模块"></a>排号模块</h2><h3 id="取号"><a href="#取号" class="headerlink" title="取号"></a>取号</h3><ul>
<li>排号页面下，点击排小桌，传入值为0的type，并向&#x2F;paihao&#x2F;quhao接口发送请求</li>
<li><img src="/%E5%8F%96%E5%8F%B7%E6%9C%8D%E5%8A%A1.png"></li>
<li>&#x2F;paihao&#x2F;quhao接口对应后端的<code>WxPaihaoController</code></li>
</ul>
<h3 id="查询我的排号"><a href="#查询我的排号" class="headerlink" title="查询我的排号"></a>查询我的排号</h3><ul>
<li>排号页面下，会首先执行getNum()方法查询排号</li>
<li>向&#x2F;paihao&#x2F;getNum接口发送请求，对应后端的<code>WxPaihaoController</code></li>
<li>得到排号的VO类，包含大、小桌当前就位号码，当前客户的桌型和号</li>
</ul>
<h1 id="后端"><a href="#后端" class="headerlink" title="后端"></a>后端</h1><h3 id="StringUtils-pathEquals"><a href="#StringUtils-pathEquals" class="headerlink" title="StringUtils.pathEquals"></a>StringUtils.pathEquals</h3><p>相对equals来说，这个方法能避免空指针异常</p>
<h3 id="java8特性-stream-的使用"><a href="#java8特性-stream-的使用" class="headerlink" title="java8特性 .stream()的使用"></a>java8特性 .stream()的使用</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Hathwayoung/article/details/113514840">https://blog.csdn.net/Hathwayoung/article/details/113514840</a></p>
<h3 id="Collectors-toList"><a href="#Collectors-toList" class="headerlink" title="Collectors.toList()"></a>Collectors.toList()</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/L_fly_J/article/details/120099739">https://blog.csdn.net/L_fly_J/article/details/120099739</a></p>
<h3 id="EntityListeners-AuditingEntityListener-class"><a href="#EntityListeners-AuditingEntityListener-class" class="headerlink" title="@EntityListeners(AuditingEntityListener.class)"></a>@EntityListeners(AuditingEntityListener.class)</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/XU906722/article/details/84778788?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1-84778788-blog-91438971.pc_relevant_default&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~default-1-84778788-blog-91438971.pc_relevant_default&utm_relevant_index=2">https://blog.csdn.net/XU906722/article/details/84778788?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-84778788-blog-91438971.pc_relevant_default&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7Edefault-1-84778788-blog-91438971.pc_relevant_default&amp;utm_relevant_index=2</a></p>
<h3 id="BeanUtils-copyProperties"><a href="#BeanUtils-copyProperties" class="headerlink" title="BeanUtils.copyProperties()"></a>BeanUtils.copyProperties()</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/dfshsdr/article/details/90513676">https://blog.csdn.net/dfshsdr/article/details/90513676</a></p>
<h3 id="Transactional"><a href="#Transactional" class="headerlink" title="@Transactional"></a>@Transactional</h3><p>数据库事务</p>
<h3 id="bindingResult-getFieldError-getDefaultMessage"><a href="#bindingResult-getFieldError-getDefaultMessage" class="headerlink" title="bindingResult.getFieldError().getDefaultMessage())"></a>bindingResult.getFieldError().getDefaultMessage())</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq78442761/article/details/99209359">https://blog.csdn.net/qq78442761/article/details/99209359</a></p>
<h3 id="T-each-enumClass-getEnumConstants"><a href="#T-each-enumClass-getEnumConstants" class="headerlink" title="T each : enumClass.getEnumConstants()"></a>T each : enumClass.getEnumConstants()</h3><p>JAVA 枚举详解(枚举基本使用高级用法枚举扩展)</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/July_whj/article/details/88081010?spm=1001.2101.3001.6650.1&utm_medium=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1-88081010-blog-108746279.pc_relevant_antiscanv3&depth_1-utm_source=distribute.pc_relevant.none-task-blog-2~default~CTRLIST~Rate-1-88081010-blog-108746279.pc_relevant_antiscanv3&utm_relevant_index=2">https://blog.csdn.net/July_whj/article/details/88081010?spm=1001.2101.3001.6650.1&amp;utm_medium=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-88081010-blog-108746279.pc_relevant_antiscanv3&amp;depth_1-utm_source=distribute.pc_relevant.none-task-blog-2%7Edefault%7ECTRLIST%7ERate-1-88081010-blog-108746279.pc_relevant_antiscanv3&amp;utm_relevant_index=2</a></p>
<h1 id="前端（小程序）"><a href="#前端（小程序）" class="headerlink" title="前端（小程序）"></a>前端（小程序）</h1><h3 id="e-currentTarget-dataset"><a href="#e-currentTarget-dataset" class="headerlink" title="e.currentTarget.dataset"></a>e.currentTarget.dataset</h3><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_41219586/article/details/103542804">https://blog.csdn.net/qq_41219586/article/details/103542804</a></p>
<p><img src="/%E5%B0%8F%E7%A8%8B%E5%BA%8FcurrentTarget.dataset%E7%9A%84%E7%90%86%E8%A7%A3.png"></p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://lcdzzz.github.io">lcdzzz</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://lcdzzz.github.io/2022/05/16/%E7%82%B9%E9%A4%90%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E9%9A%8F%E8%AE%B0/">http://lcdzzz.github.io/2022/05/16/%E7%82%B9%E9%A4%90%E7%B3%BB%E7%BB%9F%E5%AD%A6%E4%B9%A0%E9%9A%8F%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://lcdzzz.github.io" target="_blank">lcdzzz的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/springboot/">springboot</a><a class="post-meta__tags" href="/tags/%E5%8E%9F%E5%88%9B/">原创</a></div><div class="post-share"><div class="social-share" data-image="https://lcdzzz.github.io/2022/05/11/pictures/diancan.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2022/06/02/tienchin%E9%A1%B9%E7%9B%AE%E7%AC%94%E8%AE%B0/" title="tienchin项目笔记"><img class="cover" src="https://img2.baidu.com/it/u=2535873879,22375097&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=900&amp;h=448" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">tienchin项目笔记</div></div><div class="info-2"><div class="info-item-1">项目结构分析项目结构：多模块（不是微服务） 整体思路：  依赖链最底层：common，提供了公用的工具，定义了统一的controller，BaseEntity实体类公共对象，以及其他的操作工具 common的上一层：framework，主要是配置类，在这里配置了系统的一些东西，例如security aop 数据源的配置等等 剩下的对应了三个的功能模块 system：系统管理，相等于具体的业务。比如系统管理中的用户管理，角色管理，菜单管理等等，包括系统监控什么的，都是写在system里面的 generator：代码生成 quartz：定时任务   ui：前端项目 admin：项目唯一的统一入口，controller都是在这里写的，上面的common等，都会被admin所依赖，这里的controller会调用对应的service  登录验证码响应结果分析： Base64字符串转图片：https://tool.jisuapi.com/base642pic.html 验证码生成接口分析： url：localhost/dev-api/captchaImage AjaxResult是一个封装...</div></div></div></a><a class="pagination-related" href="/2022/05/15/2022%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0/" title="2022操作系统复习"><img class="cover" src="https://img1.baidu.com/it/u=3338944306,761302638&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=200&amp;h=200" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">2022操作系统复习</div></div><div class="info-2"><div class="info-item-1">操作系统引论定义 os是配置在计算机硬件上的第一层软件，是对硬件系统的首次扩充 主要作用提高利用率并为用户和应用程序提供一个简单的接口，便于用户使用 大量的应用软件，都直接依赖于操作系统的支持，取得它所提供的服务  os的目标 方便性 有效性 可扩充性 开放性  os的作用 作为用户和计算机硬件系统之间的接口 作为计算机系统资源的管理者，资源分为【处理机、存储器、IO设备、文件（数据和程序）】 实现了对计算机资源的抽象  操作系统的特征基本特征 并发 共享 虚拟 异步  主要功能处理机管理功能 进程控制 进程同步 进程通信 调度  存储器管理功能 内存分配 内存保护 地址映射 内存扩充  设备管理功能 缓冲管理 设备分配 设备处理  文件管理功能 文件存储空间管理 目录管理 文件读写管理和保护  os和用户之间的接口 用户接口 程序接口  进程的描述和控制程序顺序执行时的特征  顺序性 封闭性 可再现性  并发执行的特征  间断性 失去封闭性 不可再现性  进程和程序的区别   进程 程序    动态 静态   是程序的执行 是有序代码的集合   独立的运行单位，能与其他的进程并...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2022/11/03/SprngSecurity%E5%AE%9E%E6%88%98%E5%AE%9E%E4%BE%8B%EF%BC%8CJWT%20Token%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81&%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/" title="SprngSecurity实战实例，JWT Token登录认证&amp;权限控制"><img class="cover" src="https://img2.baidu.com/it/u=924906505,2741718824&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=250" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-03</div><div class="info-item-2">SprngSecurity实战实例，JWT Token登录认证&amp;权限控制</div></div><div class="info-2"><div class="info-item-1"> 这个在暑假就写过，上学以后重新再去写一遍发现困难比较多，于是准备写一篇记录一下。 tips: 源码在文章末尾，sql文件在源码resource文件夹下的sql文件夹里   需求想用springsecurity实现JWT Token登录认证，实现动态菜单生成，权限控制，登出（用户注销）。 认证准备工作 maven依赖 1234567891011121314151617181920212223242526     &lt;dependency&gt;         &lt;groupId&gt;com.alibaba&lt;/groupId&gt;         &lt;artifactId&gt;fastjson&lt;/artifactId&gt;         &lt;version&gt;1.2.47&lt;/version&gt;     &lt;/dependency&gt;&lt;dependency&gt;         &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;         &lt;artifact...</div></div></div></a><a class="pagination-related" href="/2022/02/07/%E5%9B%BE%E4%B9%A6%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F%E4%BB%8B%E7%BB%8D/" title="图书管理系统介绍"><img class="cover" src="https://images.wallpaperscraft.com/image/single/astronaut_spacesuit_reflection_144426_300x168.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-02-07</div><div class="info-item-2">图书管理系统介绍</div></div><div class="info-2"><div class="info-item-1">图书管理系统介绍简介项目地址：https://github.com/lcdzzz/springboot-library 对于github项目：https://github.com/jacklightChen/ManageBooks  的改造，这是原项目地址。 一个基于SpringBoot+Thymeleaf渲染的图书管理系统功能:  用户: a.预约图书 b.查看预约记录 c.还书 d.查看个人信息以及修改个人信息 管理员: a.添加图书 b.处理预约(借书) c.查看借阅记录另:1.当用户过了还书日期仍旧未还书时会发邮件通知（原）2.当有书被还时发邮件通知预约书的用户到图书馆进行借书（原）  在学习这个项目的过程中发现原项目的提供的sql文件并不完整，于是花了一些时间去完善了表结构，存储过程以及视图。 适用人群适合刚接触springboot不久的同学使用，因为几乎对每行代码都写上了注释，阅读起来会更舒适 使用技术   后端 …    核心框架 spring、springboot、mybatis   连接池 Alibaba Druid      前端 …    核心框架(轻量简洁...</div></div></div></a><a class="pagination-related" href="/2022/01/26/2022springboot%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0/" title="2022springboot自学笔记"><img class="cover" src="https://images.wallpaperscraft.com/image/single/soldier_helmet_art_123765_300x168.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-26</div><div class="info-item-2">2022springboot自学笔记</div></div><div class="info-2"><div class="info-item-1">Spring Boot 整合 Web 开发Jsonweb中JSON框架的大致介绍 三大主流框架 jackson gson fastjson   序列化和反序列化 序列化：对象-&gt;JSON(响应JSON) 反序列化：JSON-&gt;对象(请求参数是JSON)   springmvc框架中，jackson和gson都已经自动配置好了,只需要添加依赖就能使用。Fastjson则需要开发者手动配置HttpMessageConverter HttpMessageConverter： 这是个接口 是个转换器：对象-&gt;JSON,JSON-&gt;对象 所有的JSON工具都会提供各自的HttpMessageConverter jackson:MappingJackson2HtttpMessageConverter gson:GsonHttpMessageConverter fastjson:       第一个例子 创建一个User实体类、 12345678910111213141516171819202122232425262728293031323334353637383940...</div></div></div></a><a class="pagination-related" href="/2022/06/22/MybatisPlus/" title="MybatisPlus"><img class="cover" src="https://img0.baidu.com/it/u=3497851059,26175775&fm=253&fmt=auto&app=138&f=JPG?w=288&h=285" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-06-22</div><div class="info-item-2">MybatisPlus</div></div><div class="info-2"><div class="info-item-1">分页功能配置和依赖12345678910spring:  datasource:    driver-class-name: com.mysql.jdbc.Driver    password: wqeq    type: com.alibaba.druid.pool.DruidDataSource    url: jdbc:mysql://localhost:3306/test08?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai    username: rootmybatis-plus:  configuration:    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl   注意：org.apache.ibatis.logging.stdout.StdOutImpl 是加入日志功能，可以返回sql语句供我们查看  maven依赖： 1234567891011121314151617181920212223242...</div></div></div></a><a class="pagination-related" href="/2022/08/01/SpringSecurity%E9%9A%8F%E8%AE%B0/" title="SpringSecurity"><img class="cover" src="https://images.wallpaperscraft.com/image/single/spruce_art_forest_131371_300x168.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-08-01</div><div class="info-item-2">SpringSecurity</div></div><div class="info-2"><div class="info-item-1">SpringSecurity完成基于数据库的认证（登录） application.yml配置 12345678910spring:  datasource:        name: test        url: jdbc:mysql://localhost:3306/javaboy?useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=Asia/Shanghai        username: root        password: wqeq        # 使用druid数据源        type: com.alibaba.druid.pool.DruidDataSource        driver-class-name: com.mysql.cj.jdbc.Driver  mysql,mybatis,druid依赖必须有 123456789101112131415&lt;dependency&gt;          &lt;groupId&gt;org.mybatis.spring...</div></div></div></a><a class="pagination-related" href="/2022/01/20/SpringBootwmm/" title="SpringBootWMM"><img class="cover" src="https://images.wallpaperscraft.com/image/single/art_trees_drawing_minimalism_100903_300x168.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-20</div><div class="info-item-2">SpringBootWMM</div></div><div class="info-2"><div class="info-item-1">SpringBoot这个是动力节点王鹤老师讲课时候的笔记，我放上来纯属为了自己看这方便 第一章  JavaConfig 为什么要使用 Spring Boot 因为Spring， SpringMVC 需要使用的大量的配置文件 （xml文件） 还需要配置各种对象，把使用的对象放入到spring容器中才能使用对象 需要了解其他框架配置规则。  SpringBoot 就相当于 不需要配置文件的Spring+SpringMVC。 常用的框架和第三方库都已经配置好了。 拿来就可以使用了。  SpringBoot开发效率高，使用方便多了   1.1 JavaConfigJavaConfig: 使用java类作为xml配置文件的替代， 是配置spring容器的纯java的方式。 在这个java类这可以创建java对象，把对象放入spring容器中（注入到容器），  使用两个注解： 1）@Configuration ： 放在一个类的上面，表示这个类是作为配置文件使用的。 2）@Bean：声明对象，把对象注入到容器中。 1234567891011121314151617181920212223242...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">lcdzzz</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">37</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">41</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B5%81%E7%A8%8B%E5%88%86%E6%9E%90%EF%BC%88%E5%B0%8F%E7%A8%8B%E5%BA%8F%E5%90%8E%E7%AB%AF%EF%BC%89"><span class="toc-number">1.</span> <span class="toc-text">流程分析（小程序后端）</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8B%E5%8D%95%E6%A8%A1%E5%9D%97"><span class="toc-number">1.1.</span> <span class="toc-text">下单模块</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#me%E9%A1%B5%E9%9D%A2"><span class="toc-number">1.2.</span> <span class="toc-text">me页面</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8E%92%E5%8F%B7%E6%A8%A1%E5%9D%97"><span class="toc-number">1.3.</span> <span class="toc-text">排号模块</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%96%E5%8F%B7"><span class="toc-number">1.3.1.</span> <span class="toc-text">取号</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9F%A5%E8%AF%A2%E6%88%91%E7%9A%84%E6%8E%92%E5%8F%B7"><span class="toc-number">1.3.2.</span> <span class="toc-text">查询我的排号</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%90%8E%E7%AB%AF"><span class="toc-number">2.</span> <span class="toc-text">后端</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#StringUtils-pathEquals"><span class="toc-number">2.0.1.</span> <span class="toc-text">StringUtils.pathEquals</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#java8%E7%89%B9%E6%80%A7-stream-%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-number">2.0.2.</span> <span class="toc-text">java8特性 .stream()的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Collectors-toList"><span class="toc-number">2.0.3.</span> <span class="toc-text">Collectors.toList()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#EntityListeners-AuditingEntityListener-class"><span class="toc-number">2.0.4.</span> <span class="toc-text">@EntityListeners(AuditingEntityListener.class)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BeanUtils-copyProperties"><span class="toc-number">2.0.5.</span> <span class="toc-text">BeanUtils.copyProperties()</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Transactional"><span class="toc-number">2.0.6.</span> <span class="toc-text">@Transactional</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#bindingResult-getFieldError-getDefaultMessage"><span class="toc-number">2.0.7.</span> <span class="toc-text">bindingResult.getFieldError().getDefaultMessage())</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#T-each-enumClass-getEnumConstants"><span class="toc-number">2.0.8.</span> <span class="toc-text">T each : enumClass.getEnumConstants()</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%89%8D%E7%AB%AF%EF%BC%88%E5%B0%8F%E7%A8%8B%E5%BA%8F%EF%BC%89"><span class="toc-number">3.</span> <span class="toc-text">前端（小程序）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#e-currentTarget-dataset"><span class="toc-number">3.0.1.</span> <span class="toc-text">e.currentTarget.dataset</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/29/zdclttt/" title="zdclttt">zdclttt</a><time datetime="2025-07-29T06:22:17.000Z" title="发表于 2025-07-29 14:22:17">2025-07-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/23/GaussDB%E5%AE%89%E8%A3%85%E5%8F%8A%E5%BA%94%E7%94%A8/" title="GaussDB安装及应用"><img src="https://img2.baidu.com/it/u=1042180318,3822666887&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=565&amp;h=330" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GaussDB安装及应用"/></a><div class="content"><a class="title" href="/2024/11/23/GaussDB%E5%AE%89%E8%A3%85%E5%8F%8A%E5%BA%94%E7%94%A8/" title="GaussDB安装及应用">GaussDB安装及应用</a><time datetime="2024-11-23T14:52:15.000Z" title="发表于 2024-11-23 22:52:15">2024-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/30/prometheus-consul-blackboxTest/" title="prometheus&amp;consul&amp;blackboxTest"><img src="https://lcdzzz.github.io/2022/05/11/pictures/prometheus.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="prometheus&amp;consul&amp;blackboxTest"/></a><div class="content"><a class="title" href="/2024/09/30/prometheus-consul-blackboxTest/" title="prometheus&amp;consul&amp;blackboxTest">prometheus&amp;consul&amp;blackboxTest</a><time datetime="2024-09-30T09:03:24.000Z" title="发表于 2024-09-30 17:03:24">2024-09-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/06/20/hadoop%E4%B8%8Ehive%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/" title="hadoop与hive的安装和配置"><img src="https://img2.baidu.com/it/u=3645694001,4033166664&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=PNG?w=300&amp;h=248" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="hadoop与hive的安装和配置"/></a><div class="content"><a class="title" href="/2024/06/20/hadoop%E4%B8%8Ehive%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/" title="hadoop与hive的安装和配置">hadoop与hive的安装和配置</a><time datetime="2024-06-20T10:00:09.000Z" title="发表于 2024-06-20 18:00:09">2024-06-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/06/05/Docker%E7%AC%94%E8%AE%B0/" title="Docker笔记"><img src="https://img2.baidu.com/it/u=346135644,1115136735&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=281" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker笔记"/></a><div class="content"><a class="title" href="/2024/06/05/Docker%E7%AC%94%E8%AE%B0/" title="Docker笔记">Docker笔记</a><time datetime="2024-06-05T03:13:46.000Z" title="发表于 2024-06-05 11:13:46">2024-06-05</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By lcdzzz</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>