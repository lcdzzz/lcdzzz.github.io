<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>关于java的Calendar类的bug | lcdzzz的博客</title><meta name="author" content="lcdzzz"><meta name="copyright" content="lcdzzz"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="这篇文章废话比较多，想看bug和本人的逆天操作的话，可以直接去看“解决办法”和“结论”部分  起源一切的一切都起源于软测这一道看似无比简单的题  简单来说就是输出20221019这样的格式，然后输出是星期几 错误的代码这是我最开始写的错误的代码 1234567891011121314151617181920212223242526272829303132333435363738394041424">
<meta property="og:type" content="article">
<meta property="og:title" content="关于java的Calendar类的bug">
<meta property="og:url" content="http://lcdzzz.github.io/2022/10/19/%E5%85%B3%E4%BA%8Ejava%E7%9A%84Calendar%E7%B1%BB%E7%9A%84bug/index.html">
<meta property="og:site_name" content="lcdzzz的博客">
<meta property="og:description" content="这篇文章废话比较多，想看bug和本人的逆天操作的话，可以直接去看“解决办法”和“结论”部分  起源一切的一切都起源于软测这一道看似无比简单的题  简单来说就是输出20221019这样的格式，然后输出是星期几 错误的代码这是我最开始写的错误的代码 1234567891011121314151617181920212223242526272829303132333435363738394041424">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://img2.baidu.com/it/u=1334167515,3225602473&fm=253&fmt=auto&app=138&f=JPG?w=658&h=494">
<meta property="article:published_time" content="2022-10-19T15:40:42.000Z">
<meta property="article:modified_time" content="2022-10-19T16:17:04.590Z">
<meta property="article:author" content="lcdzzz">
<meta property="article:tag" content="原创">
<meta property="article:tag" content="解决的错误">
<meta property="article:tag" content="java报错">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://img2.baidu.com/it/u=1334167515,3225602473&fm=253&fmt=auto&app=138&f=JPG?w=658&h=494"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "关于java的Calendar类的bug",
  "url": "http://lcdzzz.github.io/2022/10/19/%E5%85%B3%E4%BA%8Ejava%E7%9A%84Calendar%E7%B1%BB%E7%9A%84bug/",
  "image": "https://img2.baidu.com/it/u=1334167515,3225602473&fm=253&fmt=auto&app=138&f=JPG?w=658&h=494",
  "datePublished": "2022-10-19T15:40:42.000Z",
  "dateModified": "2022-10-19T16:17:04.590Z",
  "author": [
    {
      "@type": "Person",
      "name": "lcdzzz",
      "url": "http://lcdzzz.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="http://lcdzzz.github.io/2022/10/19/%E5%85%B3%E4%BA%8Ejava%E7%9A%84Calendar%E7%B1%BB%E7%9A%84bug/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: '复制成功',
    error: '复制失败',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: '加载更多'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '关于java的Calendar类的bug',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(https://img2.baidu.com/it/u=1334167515,3225602473&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPG?w=658&amp;h=494);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">lcdzzz的博客</span></a><a class="nav-page-title" href="/"><span class="site-name">关于java的Calendar类的bug</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  返回首页</span></span></a></span><div id="menus"></div></nav><div id="post-info"><h1 class="post-title">关于java的Calendar类的bug</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-10-19T15:40:42.000Z" title="发表于 2022-10-19 23:40:42">2022-10-19</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-10-19T16:17:04.590Z" title="更新于 2022-10-20 00:17:04">2022-10-20</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E8%A7%A3%E5%86%B3%E7%9A%84%E9%94%99%E8%AF%AF/">解决的错误</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">浏览量:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><blockquote>
<p>这篇文章废话比较多，想看bug和本人的逆天操作的话，可以直接去看“解决办法”和“结论”部分</p>
</blockquote>
<h1 id="起源"><a href="#起源" class="headerlink" title="起源"></a>起源</h1><p>一切的一切都起源于软测这一道看似无比简单的题</p>
<p><img src="/image-20221019234145600.png" alt="image-20221019234145600"></p>
<p>简单来说就是输出20221019这样的格式，然后输出是星期几</p>
<h1 id="错误的代码"><a href="#错误的代码" class="headerlink" title="错误的代码"></a>错误的代码</h1><p>这是我最开始写的错误的代码</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">day</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        <span class="keyword">while</span> (in.hasNext()) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;输入任意1900从年到2400年之间的8位数的一个日期（日期格式例子：20221014）&quot;</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">next</span> <span class="operator">=</span> in.next();</span><br><span class="line">            <span class="type">char</span>[] chars = next.toCharArray();</span><br><span class="line">            <span class="type">String</span> <span class="variable">tempYear</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">tempMonth</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">tempDay</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">                tempYear = tempYear + chars[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">4</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">                tempMonth = tempMonth + chars[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">6</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">                tempDay = tempDay + chars[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> <span class="variable">year</span> <span class="operator">=</span> Integer.parseInt(tempYear);</span><br><span class="line">            <span class="type">int</span> <span class="variable">month</span> <span class="operator">=</span> Integer.parseInt(tempMonth);</span><br><span class="line">            <span class="type">int</span> <span class="variable">day</span> <span class="operator">=</span> Integer.parseInt(tempDay);</span><br><span class="line"><span class="comment">//        System.out.println(year+&quot; &quot;+month+&quot; &quot;+day+&quot; &quot;);</span></span><br><span class="line">            <span class="keyword">if</span> (year &lt; <span class="number">1900</span> || year &gt; <span class="number">2400</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;日期格式错误！&quot;</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (month &lt; <span class="number">1</span> || month &gt; <span class="number">12</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;日期格式错误！&quot;</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (day &lt; <span class="number">1</span> || day &gt; <span class="number">31</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;日期格式错误！&quot;</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="type">int</span> <span class="variable">leapYear</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">commonYear</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1900</span>; i &lt; year; i++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (year % <span class="number">4</span> == <span class="number">0</span> &amp;&amp; year % <span class="number">100</span> != <span class="number">0</span> || year % <span class="number">400</span> == <span class="number">0</span>) &#123;</span><br><span class="line">                        leapYear++;</span><br><span class="line">                    &#125; <span class="keyword">else</span></span><br><span class="line">                        commonYear++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> <span class="variable">counts</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            counts = counts + leapYear * <span class="number">366</span>;</span><br><span class="line">            counts = counts + commonYear * <span class="number">365</span>;</span><br><span class="line">            <span class="keyword">switch</span> (month)&#123;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">12</span>:</span><br><span class="line">                    counts+=<span class="number">30</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">11</span>:</span><br><span class="line">                    counts+=<span class="number">31</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">10</span>:</span><br><span class="line">                    counts+=<span class="number">30</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">9</span>:</span><br><span class="line">                    counts += <span class="number">31</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">8</span>:</span><br><span class="line">                    counts += <span class="number">31</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">7</span>:</span><br><span class="line">                    counts += <span class="number">30</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">6</span>:</span><br><span class="line">                    counts += <span class="number">31</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">5</span>:</span><br><span class="line">                    counts += <span class="number">30</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">4</span>:</span><br><span class="line">                    counts += <span class="number">31</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">3</span>:</span><br><span class="line">                    <span class="comment">//sumDays += 28;</span></span><br><span class="line">                    <span class="comment">//判断year是否是闰年</span></span><br><span class="line">                    <span class="keyword">if</span>((year%<span class="number">4</span>==<span class="number">0</span>&amp;&amp;year%<span class="number">100</span>!=<span class="number">0</span>)||year%<span class="number">400</span>==<span class="number">0</span>)&#123;</span><br><span class="line">                        counts+=<span class="number">29</span>;</span><br><span class="line">                    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                        counts+=<span class="number">28</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">                    counts+=<span class="number">31</span>;</span><br><span class="line">                <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">                    counts+=day;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">&quot;counts = &quot;</span> + counts);</span><br><span class="line">            <span class="type">int</span> <span class="variable">temp</span> <span class="operator">=</span> counts % <span class="number">7</span>;</span><br><span class="line">            <span class="keyword">if</span> (temp == <span class="number">0</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;星期日&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (temp == <span class="number">1</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;星期一&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (temp == <span class="number">2</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;星期二&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (temp == <span class="number">3</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;星期三&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (temp == <span class="number">4</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;星期四&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (temp == <span class="number">5</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;星期五&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (temp == <span class="number">6</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;星期六&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>因为要考虑的错误输入，所以代码看起来非常的冗余</p>
<p>不知道为什么会错，求发现问题的大佬联系qq1473220685，请喝奶茶</p>
</blockquote>
<p>口头描述下遇到的bug吧，19000101往后几年，基本上没什么问题的，但是时间跨度一大，就出问题了。</p>
<h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><p>于是就干脆去网上找到现成的工具类了</p>
<p>下面是更改后的代码，这边写的简介明了点</p>
<h2 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">date</span> <span class="operator">=</span> LocalDate.of(<span class="number">2022</span>,<span class="number">10</span>,<span class="number">19</span>);</span><br><span class="line">        <span class="type">ZoneId</span> <span class="variable">zone</span> <span class="operator">=</span> ZoneId.systemDefault();</span><br><span class="line">        <span class="type">Instant</span> <span class="variable">instant</span> <span class="operator">=</span> date.atStartOfDay().atZone(zone).toInstant();</span><br><span class="line">        java.util.<span class="type">Date</span> <span class="variable">da</span> <span class="operator">=</span> Date.from(instant);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">weekDayString</span> <span class="operator">=</span> getWeek(da);</span><br><span class="line">        System.out.println(weekDayString);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getWeek</span><span class="params">(Date date)</span>&#123;</span><br><span class="line">        String[] weeks = &#123;<span class="string">&quot;星期日&quot;</span>,<span class="string">&quot;星期一&quot;</span>,<span class="string">&quot;星期二&quot;</span>,<span class="string">&quot;星期三&quot;</span>,<span class="string">&quot;星期四&quot;</span>,<span class="string">&quot;星期五&quot;</span>,<span class="string">&quot;星期六&quot;</span>&#125;;</span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">cal</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">        cal.setTime(date);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> cal.get(Calendar.DAY_OF_WEEK);</span><br><span class="line">        System.out.println(i);</span><br><span class="line">        <span class="type">int</span> <span class="variable">week_index</span> <span class="operator">=</span> i - <span class="number">1</span>;</span><br><span class="line">        System.out.println(week_index);</span><br><span class="line">        <span class="keyword">if</span>(week_index&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            week_index = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> weeks[week_index];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h2><p><img src="/image-20221019235135222.png" alt="image-20221019235135222"></p>
<h2 id="bug描述"><a href="#bug描述" class="headerlink" title="bug描述"></a>bug描述</h2><p>看起来没什么毛病对不对？</p>
<p>但是换个测试用例，那就出问题了</p>
<h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">date</span> <span class="operator">=</span> LocalDate.of(<span class="number">1900</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">        <span class="type">ZoneId</span> <span class="variable">zone</span> <span class="operator">=</span> ZoneId.systemDefault();</span><br><span class="line">        <span class="type">Instant</span> <span class="variable">instant</span> <span class="operator">=</span> date.atStartOfDay().atZone(zone).toInstant();</span><br><span class="line">        java.util.<span class="type">Date</span> <span class="variable">da</span> <span class="operator">=</span> Date.from(instant);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">weekDayString</span> <span class="operator">=</span> getWeek(da);</span><br><span class="line">        System.out.println(weekDayString);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getWeek</span><span class="params">(Date date)</span>&#123;</span><br><span class="line">        String[] weeks = &#123;<span class="string">&quot;星期日&quot;</span>,<span class="string">&quot;星期一&quot;</span>,<span class="string">&quot;星期二&quot;</span>,<span class="string">&quot;星期三&quot;</span>,<span class="string">&quot;星期四&quot;</span>,<span class="string">&quot;星期五&quot;</span>,<span class="string">&quot;星期六&quot;</span>&#125;;</span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">cal</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">        cal.setTime(date);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> cal.get(Calendar.DAY_OF_WEEK);</span><br><span class="line">        System.out.println(i);</span><br><span class="line">        <span class="type">int</span> <span class="variable">week_index</span> <span class="operator">=</span> i - <span class="number">1</span>;</span><br><span class="line">        System.out.println(week_index);</span><br><span class="line">        <span class="keyword">if</span>(week_index&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            week_index = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> weeks[week_index];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="输出-1"><a href="#输出-1" class="headerlink" title="输出"></a>输出</h3><p><img src="/image-20221019235335175.png" alt="image-20221019235335175"></p>
<p>1900的1月1日，怎么可能是周日呢？明明是周一啊</p>
<h3 id="再测试"><a href="#再测试" class="headerlink" title="再测试"></a>再测试</h3><p>我们再试试1900年1月2日的输出时什么</p>
<p><strong>代码</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Test02</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">LocalDate</span> <span class="variable">date</span> <span class="operator">=</span> LocalDate.of(<span class="number">1900</span>,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line">        <span class="type">ZoneId</span> <span class="variable">zone</span> <span class="operator">=</span> ZoneId.systemDefault();</span><br><span class="line">        <span class="type">Instant</span> <span class="variable">instant</span> <span class="operator">=</span> date.atStartOfDay().atZone(zone).toInstant();</span><br><span class="line">        java.util.<span class="type">Date</span> <span class="variable">da</span> <span class="operator">=</span> Date.from(instant);</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">weekDayString</span> <span class="operator">=</span> getWeek(da);</span><br><span class="line">        System.out.println(weekDayString);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getWeek</span><span class="params">(Date date)</span>&#123;</span><br><span class="line">        String[] weeks = &#123;<span class="string">&quot;星期日&quot;</span>,<span class="string">&quot;星期一&quot;</span>,<span class="string">&quot;星期二&quot;</span>,<span class="string">&quot;星期三&quot;</span>,<span class="string">&quot;星期四&quot;</span>,<span class="string">&quot;星期五&quot;</span>,<span class="string">&quot;星期六&quot;</span>&#125;;</span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">cal</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">        cal.setTime(date);</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> cal.get(Calendar.DAY_OF_WEEK);</span><br><span class="line">        System.out.println(i);</span><br><span class="line">        <span class="type">int</span> <span class="variable">week_index</span> <span class="operator">=</span> i - <span class="number">1</span>;</span><br><span class="line">        System.out.println(week_index);</span><br><span class="line">        <span class="keyword">if</span>(week_index&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            week_index = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> weeks[week_index];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>输出</strong></p>
<p><img src="/image-20221019235524703.png" alt="image-20221019235524703"></p>
<p><img src="/image-20221019235758176.png" alt="image-20221019235758176"></p>
<h1 id="结论"><a href="#结论" class="headerlink" title="结论"></a>结论</h1><p>综上，我认为这是Calendar类本身的bug。当然这个bug问题也不大，毕竟也没什么正常的需求需要去看19000101是星期几吧？</p>
<p>但本着“你就说有没有解决吧”的精神，我还是给这坨代码用if给救了回来…..</p>
<p><img src="/image-20221020000121317.png" alt="image-20221020000121317"></p>
<h1 id="最终代码"><a href="#最终代码" class="headerlink" title="最终代码"></a>最终代码</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.time.Instant;</span><br><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="keyword">import</span> java.time.ZoneId;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">day</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="type">Scanner</span> <span class="variable">in</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;输入任意1900从年到2400年之间的8位数的一个日期（日期格式例子：20221014）&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span> (in.hasNext()) &#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">next</span> <span class="operator">=</span> in.next();</span><br><span class="line">            <span class="type">int</span> <span class="variable">i1</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                i1 = Integer.parseInt(next);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (NumberFormatException e) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;日期格式错误！请重新输入&quot;</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (<span class="number">19000000</span> &gt; i1 || i1 &gt; <span class="number">24000000</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;日期格式错误！请重新输入&quot;</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">char</span>[] chars = next.toCharArray();</span><br><span class="line">            <span class="type">String</span> <span class="variable">tempYear</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">tempMonth</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="type">String</span> <span class="variable">tempDay</span> <span class="operator">=</span> <span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">                tempYear = tempYear + chars[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">4</span>; i &lt; <span class="number">6</span>; i++) &#123;</span><br><span class="line">                tempMonth = tempMonth + chars[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">6</span>; i &lt; <span class="number">8</span>; i++) &#123;</span><br><span class="line">                tempDay = tempDay + chars[i];</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">int</span> <span class="variable">year</span> <span class="operator">=</span> Integer.parseInt(tempYear);</span><br><span class="line">            <span class="type">int</span> <span class="variable">month</span> <span class="operator">=</span> Integer.parseInt(tempMonth);</span><br><span class="line">            <span class="type">int</span> <span class="variable">day</span> <span class="operator">=</span> Integer.parseInt(tempDay);</span><br><span class="line">            <span class="keyword">if</span> (year &lt; <span class="number">1900</span> || year &gt; <span class="number">2400</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;日期格式错误！请重新输入&quot;</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (month &lt; <span class="number">1</span> || month &gt; <span class="number">12</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;日期格式错误！请重新输入&quot;</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (day &lt; <span class="number">1</span> || day &gt; <span class="number">31</span>) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;日期格式错误！请重新输入&quot;</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">LocalDate</span> <span class="variable">date</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;year = &quot;</span> + year);</span><br><span class="line">                System.out.println(<span class="string">&quot;month = &quot;</span> + month);</span><br><span class="line">                System.out.println(<span class="string">&quot;day = &quot;</span> + day);</span><br><span class="line">                <span class="keyword">if</span> (year==<span class="number">1900</span>&amp;&amp;month==<span class="number">1</span>&amp;&amp;day==<span class="number">1</span>)&#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;星期一&quot;</span>);</span><br><span class="line">                    <span class="keyword">continue</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                date = LocalDate.of(year, month, day);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;日期格式错误！请重新输入&quot;</span>);</span><br><span class="line">                <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="type">ZoneId</span> <span class="variable">zone</span> <span class="operator">=</span> ZoneId.systemDefault();</span><br><span class="line">            <span class="type">Instant</span> <span class="variable">instant</span> <span class="operator">=</span> date.atStartOfDay().atZone(zone).toInstant();</span><br><span class="line">            java.util.<span class="type">Date</span> <span class="variable">da</span> <span class="operator">=</span> Date.from(instant);</span><br><span class="line">            <span class="type">String</span> <span class="variable">week</span> <span class="operator">=</span> getWeek(da);</span><br><span class="line">            System.out.println(week);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> String <span class="title function_">getWeek</span><span class="params">(Date date)</span> &#123;</span><br><span class="line">        String[] weeks = &#123;<span class="string">&quot;星期日&quot;</span>, <span class="string">&quot;星期一&quot;</span>, <span class="string">&quot;星期二&quot;</span>, <span class="string">&quot;星期三&quot;</span>, <span class="string">&quot;星期四&quot;</span>, <span class="string">&quot;星期五&quot;</span>, <span class="string">&quot;星期六&quot;</span>&#125;;</span><br><span class="line">        <span class="type">Calendar</span> <span class="variable">cal</span> <span class="operator">=</span> Calendar.getInstance();</span><br><span class="line">        cal.setTime(date);</span><br><span class="line">        <span class="type">int</span> <span class="variable">week_index</span> <span class="operator">=</span> cal.get(Calendar.DAY_OF_WEEK) - <span class="number">1</span>;</span><br><span class="line">        System.out.println(week_index);</span><br><span class="line">        <span class="keyword">if</span> (week_index &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            week_index = <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> weeks[week_index];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>文章作者: </span><span class="post-copyright-info"><a href="http://lcdzzz.github.io">lcdzzz</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>文章链接: </span><span class="post-copyright-info"><a href="http://lcdzzz.github.io/2022/10/19/%E5%85%B3%E4%BA%8Ejava%E7%9A%84Calendar%E7%B1%BB%E7%9A%84bug/">http://lcdzzz.github.io/2022/10/19/%E5%85%B3%E4%BA%8Ejava%E7%9A%84Calendar%E7%B1%BB%E7%9A%84bug/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来源 <a href="http://lcdzzz.github.io" target="_blank">lcdzzz的博客</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%8E%9F%E5%88%9B/">原创</a><a class="post-meta__tags" href="/tags/%E8%A7%A3%E5%86%B3%E7%9A%84%E9%94%99%E8%AF%AF/">解决的错误</a><a class="post-meta__tags" href="/tags/java%E6%8A%A5%E9%94%99/">java报错</a></div><div class="post-share"><div class="social-share" data-image="https://img2.baidu.com/it/u=1334167515,3225602473&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPG?w=658&amp;h=494" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2022/10/27/%E7%BA%A0%E9%94%99%E7%BC%96%E7%A0%81%EF%BC%9A%E6%B5%B7%E6%98%8E%E7%A0%81/" title="纠错编码：海明码"><img class="cover" src="https://img2.baidu.com/it/u=2201023132,635362523&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=320&amp;h=300" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="info"><div class="info-1"><div class="info-item-1">上一篇</div><div class="info-item-2">纠错编码：海明码</div></div><div class="info-2"><div class="info-item-1">  分为4步  第一步 确认校验码位数r   第二步 确定校验码和数据的位置 为什么是10为数据位？因为4位校验码+6位信息位&#x3D;10位  校验码放到2的几次方的位置，其他的地方按顺序放已知的信息位    第三步 求出校验码的值一  数据位是1，那么二进制就是0001，至于二进制有几位，取决于最后一位数，比如这边最后一位是10，它的二进制为1010，四位，所以二进制需要四位    二 如何求校验码的值： 我们知道每一位校验位都可以校验几位数据，对于P1来说，它可以校验哪几位呢？  它数据所对应的2进制位 0001，”1”所在的位置是末尾，也就是第一位  那么我们就看接下来，还有哪些位的第一位是1，即D1,D2,D4,D5  因此，P1的代码可以校验的数据就是P1,D1,D2,D4,D5  如何处理这几位数据呢？ 只需要让所有的要校验的位异或为0，如上图   同理：  P2所对应的2进制位第2位是1，那么我们就去找谁的第2位是1，即D1,D3,D4,D6  因此，P2的代码可以校验的数据就是P2,D1,D3,D4,D6  以此类推…   以下为具体步骤  第四步 检测并纠错...</div></div></div></a><a class="pagination-related" href="/2022/10/01/%E5%B7%A5%E4%BD%9C%E6%B5%81/" title="工作流workflow"><img class="cover" src="https://lcdzzz.github.io/2022/10/01/gong-zuo-liu/1662298798529-e1bcda3a-42fe-4d7b-8b42-a1a38cd3c654.png" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="info text-right"><div class="info-1"><div class="info-item-1">下一篇</div><div class="info-item-2">工作流workflow</div></div><div class="info-2"><div class="info-item-1">工作流workflow状态机解决流程问题工作流：一个可以处理复杂情况的状态机  例如，员工请假这个流程，首先员工请假提交申请，假设有项目经理进行审批，审批有两种结果：通过或者拒绝。  实现上面这个需求：  创建一张请假表，表中有员工id，请假的天数，请假的理由，项目经理的id，请假的状态status 当员工请假的时候，就自动向这张表中添加记录 然后，当项目经理登录到OA的时候，就来这张表查询自己需要的请假申请，查到之后，可以选择批准或者拒绝 接下来，员工登录之后，就可以查到自己的请假申请的审批结果  在这样的实现思路中，请假的流程我们是通过status这个字段控制的。例如：  status 0 代表待审批 1 代表审批通过 2 代表拒绝  上面这个例子，status就是状态码，通过这个子弹的值来控制流程的状态，这个方式我们可以称之为使用状态机来解决流程问题，但是这种思路只能解决非常简单的流程问题。 一些复杂的流程报销审批的流程 在这个流程中，已经没法使用status去描述这个报销走到哪一步了。如果非要用status，namestatus可能会有很多个取值 。  笔记本电脑生产流程...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2021/07/04/%E8%A7%A3%E5%86%B3%20java%20%E2%80%9C%E9%94%99%E8%AF%AF%EF%BC%9A%E7%BC%96%E7%A0%81GBK%20%E7%9A%84%E4%B8%8D%E5%8F%AF%E6%98%A0%E5%B0%84%E5%AD%97%E7%AC%A6%E2%80%9D/" title="解决 java “错误：编码GBK 的不可映射字符”"><img class="cover" src="https://images.wallpaperscraft.com/image/single/mclaren_p1_minimalism_art_98755_300x168.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-04</div><div class="info-item-2">解决 java “错误：编码GBK 的不可映射字符”</div></div><div class="info-2"><div class="info-item-1">解决 java “错误：编码GBK 的不可映射字符” 当java程序在idea上可以执行，但在cmd时报错：编码GBK 的不可映射字符时，通常都是因为GB2312编码的问题。  比如这个程序。在idea上运行时不会有问题的。用cmd运行时问题就出在第10行的int xd =0//向导数上，其中的“向导数”出了问题。   123456789101112131415161718192021222324252627Scanner in = new Scanner(System.in);while (in.hasNext()) &#123;   int line = in.nextInt();    while (line-- &gt; 0) &#123;        int n = in.nextInt();//人数        int xd = 0;//向导数        int qx = n / 2;//抢险        int yl =(n-qx) *2 / 3;//医疗        int tx = n-qx - yl;//通讯        if (qx % 10 ...</div></div></div></a><a class="pagination-related" href="/2022/01/20/%E8%A7%A3%E5%86%B3%E4%B8%BB%E6%9C%BAjava%E9%A1%B9%E7%9B%AE%E6%97%A0%E6%B3%95%E8%BF%9E%E6%8E%A5linux%E4%B8%8Aredis%E6%9C%8D%E5%8A%A1%E7%9A%84%E9%97%AE%E9%A2%98/" title="解决主机java项目无法连接linux上redis服务的问题"><img class="cover" src="https://images.wallpaperscraft.com/image/single/mountains_river_sun_143529_300x168.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-01-20</div><div class="info-item-2">解决主机java项目无法连接linux上redis服务的问题</div></div><div class="info-2"><div class="info-item-1">解决主机java项目无法连接linux上redis服务的问题 若远程主机需要访问redis服务器，可以修改redis.conf配置文件。如我的linux服务上的redis.config文件存放在 /usr/local/bin/zhouconfig下  bind字段默认为： bind 127.0.0.1 这样只能本机访问redis 若允许远程主机访问，可注释掉bind行  或者  将bind 127.0.0.1改为： bind 0.0.0.0   .将protected-mod yes 修改为protected-mod no ；意思是将redis的保护模式关闭掉，这样可以供外部来访问redis访问   去服务器的控制台开启6379端口   </div></div></div></a><a class="pagination-related" href="/2022/05/15/2022%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E5%A4%8D%E4%B9%A0/" title="2022操作系统复习"><img class="cover" src="https://img1.baidu.com/it/u=3338944306,761302638&fm=253&fmt=auto&app=138&f=JPEG?w=200&h=200" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-05-15</div><div class="info-item-2">2022操作系统复习</div></div><div class="info-2"><div class="info-item-1">操作系统引论定义 os是配置在计算机硬件上的第一层软件，是对硬件系统的首次扩充 主要作用提高利用率并为用户和应用程序提供一个简单的接口，便于用户使用 大量的应用软件，都直接依赖于操作系统的支持，取得它所提供的服务  os的目标 方便性 有效性 可扩充性 开放性  os的作用 作为用户和计算机硬件系统之间的接口 作为计算机系统资源的管理者，资源分为【处理机、存储器、IO设备、文件（数据和程序）】 实现了对计算机资源的抽象  操作系统的特征基本特征 并发 共享 虚拟 异步  主要功能处理机管理功能 进程控制 进程同步 进程通信 调度  存储器管理功能 内存分配 内存保护 地址映射 内存扩充  设备管理功能 缓冲管理 设备分配 设备处理  文件管理功能 文件存储空间管理 目录管理 文件读写管理和保护  os和用户之间的接口 用户接口 程序接口  进程的描述和控制程序顺序执行时的特征  顺序性 封闭性 可再现性  并发执行的特征  间断性 失去封闭性 不可再现性  进程和程序的区别   进程 程序    动态 静态   是程序的执行 是有序代码的集合   独立的运行单位，能与其他的进程并...</div></div></div></a><a class="pagination-related" href="/2022/11/03/SprngSecurity%E5%AE%9E%E6%88%98%E5%AE%9E%E4%BE%8B%EF%BC%8CJWT%20Token%E7%99%BB%E5%BD%95%E8%AE%A4%E8%AF%81&%E6%9D%83%E9%99%90%E6%8E%A7%E5%88%B6/" title="SprngSecurity实战实例，JWT Token登录认证&amp;权限控制"><img class="cover" src="https://img2.baidu.com/it/u=924906505,2741718824&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=250" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-03</div><div class="info-item-2">SprngSecurity实战实例，JWT Token登录认证&amp;权限控制</div></div><div class="info-2"><div class="info-item-1"> 这个在暑假就写过，上学以后重新再去写一遍发现困难比较多，于是准备写一篇记录一下。 tips: 源码在文章末尾，sql文件在源码resource文件夹下的sql文件夹里   需求想用springsecurity实现JWT Token登录认证，实现动态菜单生成，权限控制，登出（用户注销）。 认证准备工作 maven依赖 1234567891011121314151617181920212223242526     &lt;dependency&gt;         &lt;groupId&gt;com.alibaba&lt;/groupId&gt;         &lt;artifactId&gt;fastjson&lt;/artifactId&gt;         &lt;version&gt;1.2.47&lt;/version&gt;     &lt;/dependency&gt;&lt;dependency&gt;         &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;         &lt;artifact...</div></div></div></a><a class="pagination-related" href="/2022/11/05/hexo-%E5%8D%9A%E5%AE%A2%E5%AE%89%E8%A3%85%E6%95%99%E7%A8%8B-%E8%83%8E%E6%95%99%E7%BA%A7/" title="hexo 博客安装教程 胎教级"><img class="cover" src="https://img1.baidu.com/it/u=3383539873,3601029117&fm=253&fmt=auto&app=138&f=JPEG?w=1920&h=460" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2022-11-05</div><div class="info-item-2">hexo 博客安装教程 胎教级</div></div><div class="info-2"><div class="info-item-1">环境准备安装git到 GitHub 的页面上下载 exe 安装文件并运行： 安装包下载地址 详细可看：(6条消息) Git 详细安装教程（详解 Git 安装过程的每一个步骤）_mukes的博客-CSDN博客_git安装  安装Nodejs下载链接：下载 | Node.js 中文网 (nodejs.cn)  详细可看：Node.js 安装配置 | 菜鸟教程 (runoob.com) 最后通过cmd 输入node --version 检测是否安装完成，只要有输出就行，不管版本号是多少  查看是否安装成功： 在桌面鼠标右键点击git bash here或者打开电脑CMD，依次输入以下指令 12node -v	#查看node版本npm -v	#查看npm版本   显示如上即成功 安装淘宝的cnpm 管理器1npm install -g cnpm --registry=http://registry.npm.taobao.org  由于国内的镜像源速度较慢，所以我们利用 npm 来安装 cnpm ，在命令行中输入npm install -g cnpm --registry=https://...</div></div></div></a><a class="pagination-related" href="/2021/07/04/java%E8%87%AA%E5%AD%A6%E7%AC%94%E8%AE%B0/" title="java自学笔记"><img class="cover" src="https://images.wallpaperscraft.com/image/single/lawn_forest_mountains_144578_300x168.jpg" alt="cover"><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2021-07-04</div><div class="info-item-2">java自学笔记</div></div><div class="info-2"><div class="info-item-1">IDEA使用新建 新建一个Empty Project 新建一个空的工程，选择创建工程窗口下面的Empty Project  给空的工程起一个名字：javase  会自动弹出一个：project structure，这个窗口先取消掉  给空的工程下新建Module（模块） idea的组织方式projecrt–&gt;module  在New Module窗口上点击左下角的java，然后next  给module起一个名字  编写代码，在src目录下新建类，写代码，并运行。    关于IDEA工具的快捷键以及一些简单的设置字体设置file–&gt;setting–&gt;输入font–&gt;设置字体样式以及字号大小  快捷方式 psvm（main方法）        sout（system.out.println)  删除一行：ctrl+y  左侧窗口的列表怎么展开？怎么关闭？ 左箭头关闭，右箭头展开，上下箭头移动  idea中退出任何窗口，都可以使用esc键  任何新增、新建、添加的快捷键： ​    alt+insert  窗口变大变小 ​    ctrl+shift+F12 ...</div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/butterfly-icon.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">lcdzzz</div><div class="author-info-description"></div><div class="site-data"><a href="/archives/"><div class="headline">文章</div><div class="length-num">37</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">41</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">7</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xxxxxx"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%B5%B7%E6%BA%90"><span class="toc-number">1.</span> <span class="toc-text">起源</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%94%99%E8%AF%AF%E7%9A%84%E4%BB%A3%E7%A0%81"><span class="toc-number">2.</span> <span class="toc-text">错误的代码</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E5%8A%9E%E6%B3%95"><span class="toc-number">3.</span> <span class="toc-text">解决办法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81"><span class="toc-number">3.1.</span> <span class="toc-text">代码</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BE%93%E5%87%BA"><span class="toc-number">3.2.</span> <span class="toc-text">输出</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bug%E6%8F%8F%E8%BF%B0"><span class="toc-number">3.3.</span> <span class="toc-text">bug描述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81-1"><span class="toc-number">3.3.1.</span> <span class="toc-text">代码</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BE%93%E5%87%BA-1"><span class="toc-number">3.3.2.</span> <span class="toc-text">输出</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%86%8D%E6%B5%8B%E8%AF%95"><span class="toc-number">3.3.3.</span> <span class="toc-text">再测试</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%BB%93%E8%AE%BA"><span class="toc-number">4.</span> <span class="toc-text">结论</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%9C%80%E7%BB%88%E4%BB%A3%E7%A0%81"><span class="toc-number">5.</span> <span class="toc-text">最终代码</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/07/29/zdclttt/" title="zdclttt">zdclttt</a><time datetime="2025-07-29T06:22:17.000Z" title="发表于 2025-07-29 14:22:17">2025-07-29</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/23/GaussDB%E5%AE%89%E8%A3%85%E5%8F%8A%E5%BA%94%E7%94%A8/" title="GaussDB安装及应用"><img src="https://img2.baidu.com/it/u=1042180318,3822666887&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=565&amp;h=330" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="GaussDB安装及应用"/></a><div class="content"><a class="title" href="/2024/11/23/GaussDB%E5%AE%89%E8%A3%85%E5%8F%8A%E5%BA%94%E7%94%A8/" title="GaussDB安装及应用">GaussDB安装及应用</a><time datetime="2024-11-23T14:52:15.000Z" title="发表于 2024-11-23 22:52:15">2024-11-23</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/09/30/prometheus-consul-blackboxTest/" title="prometheus&amp;consul&amp;blackboxTest"><img src="https://lcdzzz.github.io/2022/05/11/pictures/prometheus.png" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="prometheus&amp;consul&amp;blackboxTest"/></a><div class="content"><a class="title" href="/2024/09/30/prometheus-consul-blackboxTest/" title="prometheus&amp;consul&amp;blackboxTest">prometheus&amp;consul&amp;blackboxTest</a><time datetime="2024-09-30T09:03:24.000Z" title="发表于 2024-09-30 17:03:24">2024-09-30</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/06/20/hadoop%E4%B8%8Ehive%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/" title="hadoop与hive的安装和配置"><img src="https://img2.baidu.com/it/u=3645694001,4033166664&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=PNG?w=300&amp;h=248" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="hadoop与hive的安装和配置"/></a><div class="content"><a class="title" href="/2024/06/20/hadoop%E4%B8%8Ehive%E7%9A%84%E5%AE%89%E8%A3%85%E5%92%8C%E9%85%8D%E7%BD%AE/" title="hadoop与hive的安装和配置">hadoop与hive的安装和配置</a><time datetime="2024-06-20T10:00:09.000Z" title="发表于 2024-06-20 18:00:09">2024-06-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/06/05/Docker%E7%AC%94%E8%AE%B0/" title="Docker笔记"><img src="https://img2.baidu.com/it/u=346135644,1115136735&amp;fm=253&amp;fmt=auto&amp;app=138&amp;f=JPEG?w=500&amp;h=281" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Docker笔记"/></a><div class="content"><a class="title" href="/2024/06/05/Docker%E7%AC%94%E8%AE%B0/" title="Docker笔记">Docker笔记</a><time datetime="2024-06-05T03:13:46.000Z" title="发表于 2024-06-05 11:13:46">2024-06-05</time></div></div></div></div></div></div></main><footer id="footer"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 By lcdzzz</span><span class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="日间和夜间模式切换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>